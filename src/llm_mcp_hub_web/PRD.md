# PRD: LLM MCP Hub 관리자 대시보드

## 1. 개요 (Overview)

### 1.1 제품명

LLM MCP Hub 관리자 대시보드 (Admin Dashboard)

### 1.2 목적

Python으로 구현된 LLM MCP Hub 서버의 상태, 성능, 사용 현황을 실시간으로 모니터링하고 관리하기 위한 웹 기반의 관리자용 대시보드.

### 1.3 대상 사용자

-   LLM MCP Hub를 운영/관리하는 시스템 관리자
-   Hub의 상태를 확인하고 문제를 진단해야 하는 개발자

---

## 2. 목표 (Goals)

-   Hub 시스템의 전반적인 건강 상태(Health)를 한눈에 파악할 수 있는 가시성 확보.
-   장애 발생 시 LLM 프로바이더, 인증 토큰 등 문제의 원인을 신속하게 진단.
-   OAuth 토큰의 만료일을 사전에 파악하여 서비스 중단을 예방하는 등 선제적인 유지보수 지원.
-   현재 시스템에서 활성화된 사용자 세션을 조회하고 관리할 수 있는 기능 제공.

---

## 3. 기능 요구사항 (Functional Requirements)

### F1: 메인 대시보드 (종합 상태)

시스템의 핵심 지표를 요약하여 보여주는 첫 화면.

-   **주요 기능**:
    -   시스템 전체 상태 배지 (`Healthy`, `Degraded`, `Unhealthy`)
    -   핵심 서비스(Hub API, Redis)의 개별 상태 표시
    -   연동된 LLM 프로바이더 상태 요약 (예: `2개 중 2개 사용 가능`)
    -   만료가 임박한 OAuth 토큰 경고 메시지

### F2: LLM 프로바이더 관리

Hub에 연동된 각 LLM 프로바이더의 상세 정보를 보여주는 화면.

-   **주요 기능**:
    -   프로바이더 목록을 카드 또는 테이블 형태로 제공
    -   개별 프로바이더의 상세 정보 표시:
        -   이름 (e.g., Claude, Gemini)
        -   현재 상태 (`available`, `unavailable`)
        -   인증 방식 (`oauth_token`, `oauth_file`)
        -   사용 가능한 모델 목록

### F3: OAuth 토큰 상태 모니터링

서비스 운영의 핵심인 OAuth 토큰의 상태를 집중적으로 관리하는 화면.

-   **주요 기능**:
    -   프로바이더별 토큰 정보를 개별 카드로 표시
    -   토큰 상태를 색상으로 구분 (`valid`: 초록, `warning`: 노랑, `expired`: 빨강)
    -   정확한 만료 예정일과 남은 유효 기간(일)을 명확하게 표시
    -   토큰 갱신 방법을 안내하는 문서로 연결되는 바로가기 버튼 제공

### F4: 활성 세션 관리

현재 Hub를 통해 생성된 활성 대화 세션을 관리하는 화면.

-   **주요 기능**:
    -   활성 세션 목록을 테이블로 제공 (컬럼: 세션 ID, 생성 시각, 마지막 사용 시각, 메시지 수)
    -   특정 세션의 전체 대화 내용을 조회하는 기능 (상세 보기)
    -   문제가 있는 세션을 강제로 종료(삭제)하는 기능

### F5: (고급) API 사용량 통계

Hub의 사용 현황을 시각적으로 파악하기 위한 통계 화면.

-   **주요 기능**:
    -   시간대별 API 요청 수를 보여주는 라인 차트
    -   프로바이더별 API 호출 비율을 보여주는 파이 차트
    -   API 에러율 및 평균 응답 시간 표시

---

## 4. 제안 기술 스택 (Tech Stack)

| 영역 | 기술 | 선택 이유 |
|---|---|---|
| 프레임워크 | Next.js | SSR, SSG 지원 및 React 기반의 뛰어난 개발 생태계 |
| 언어 | TypeScript | 타입 안정성을 통한 코드 품질 및 유지보수성 향상 |
| 상태 관리 | React Query (TanStack Query) | 서버 상태 관리에 최적화, API 데이터 Fetching, Caching, 동기화 자동화 |
| UI 컴포넌트 | Shadcn/ui | Tailwind CSS 기반의 조합 가능한 컴포넌트, 디자인 커스터마이징 용이 |
| 스타일링 | Tailwind CSS | Utility-First 방식으로 빠르고 일관된 UI 개발 |
| 차트 라이브러리 | Recharts | React 환경에서 사용하기 쉬운 조합형 차트 라이브러리 |

---

## 5. API 의존성 (API Dependencies)

본 대시보드 개발을 위해 LLM MCP Hub 백엔드에서는 다음 API들이 반드시 제공되어야 합니다.

| HTTP Method | Endpoint | 설명 | 관련 기능 |
|---|---|---|---|
| `GET` | `/health` | 시스템 전반 및 핵심 서비스 상태 조회 | F1 |
| `GET` | `/health/tokens` | OAuth 토큰 상태 및 만료일 조회 | F3 |
| `GET` | `/v1/providers` | 등록된 모든 LLM 프로바이더 목록 및 상태 조회 | F2 |
| `GET` | `/v1/sessions` | **(신규 필요)** 현재 활성화된 모든 세션 목록 조회 | F4 |
| `GET` | `/v1/sessions/{session_id}` | 특정 세션의 상세 정보(대화 내역 등) 조회 | F4 |
| `DELETE` | `/v1/sessions/{session_id}` | 특정 세션 삭제 | F4 |

---

## 6. 화면 구성 (Screen Layout)

-   **네비게이션**: 좌측에 사이드바 형태의 네비게이션 메뉴를 두어 각 기능 화면(대시보드, 프로바이더, 토큰, 세션)으로 이동할 수 있도록 한다.
-   **메인 컨텐츠**: 우측의 넓은 영역에 선택된 기능의 메인 컨텐츠를 표시한다.
-   **헤더**: 최상단에는 현재 로그인된 관리자 정보나 알림 등을 표시할 수 있는 공간을 둔다.
