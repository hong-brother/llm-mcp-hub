# LLM API 비용 비교 분석

## 1. 개요

LLM MCP Hub 운영 시 구독 방식과 API Key 방식의 비용을 비교 분석한 문서입니다.

### 1.1 비교 대상

| 방식 | 설명 | 적합 규모 |
|------|------|----------|
| **구독 방식** | Claude Pro/Max, Gemini Advanced | 개인/소규모 |
| **API Key 방식** | Claude API, Gemini API | 중규모 이상 |

---

## 2. API 가격 현황 (2025년 기준)

### 2.1 Claude API (백만 토큰당)

| 모델 | Input | Output | 특징 |
|------|-------|--------|------|
| **Haiku 3** | $0.25 | $1.25 | 가벼운 작업, 최저가 |
| **Sonnet 4.5** | $3.00 | $15.00 | 일반 작업 (권장) |
| **Opus 4.5** | $5.00 | $25.00 | 고급 작업, 최고 성능 |

#### Claude 4.1 시리즈 (Thinking 토큰 포함)

| 모델 | Input | Output | Thinking |
|------|-------|--------|----------|
| Sonnet 4.1 | $5.00 | $25.00 | $10.00 |
| Opus 4.1 | $20.00 | $80.00 | $40.00 |

### 2.2 Gemini API (백만 토큰당)

| 모델 | Input | Output | 특징 |
|------|-------|--------|------|
| **Flash-Lite 2.5** | $0.075 | $0.30 | 최저가, 분류/라우팅용 |
| **Flash 2.5** | $0.15 | $0.60 | 가벼운 작업 |
| **Flash 3** | $0.50 | $3.00 | 일반 작업 (권장) |
| **Pro 2.5** | $1.25 | $10.00 | 고급 작업 |

### 2.3 할인 옵션

| 옵션 | 할인율 | 적용 조건 |
|------|--------|----------|
| **Batch API** | 50% | 비실시간 처리 |
| **Prompt Caching** | 90% | 반복 시스템 프롬프트 |
| **Context Caching (Gemini)** | 90% | 캐시 읽기 시 |

---

## 3. 사용 시나리오 정의

### 3.1 사용 패턴

| 패턴 | 설명 | 사용자당 일일 대화 | 대화당 토큰 |
|------|------|-------------------|------------|
| **Light** | 간단한 질문/답변 | 5회 | 입력 500 / 출력 500 |
| **Medium** | 일반적인 업무 활용 | 15회 | 입력 1,000 / 출력 1,500 |
| **Heavy** | 개발자/파워유저 | 30회 | 입력 2,000 / 출력 3,000 |

### 3.2 토큰 사용량 계산 (1,000명 기준)

| 패턴 | 일일 대화 수 | 입력 토큰 | 출력 토큰 |
|------|-------------|----------|----------|
| Light | 5,000회 | 2.5M | 2.5M |
| Medium | 15,000회 | 15M | 22.5M |
| Heavy | 30,000회 | 60M | 90M |

---

## 4. 비용 계산

### 4.1 Light 사용 패턴 (1,000명/일)

```
일일 총 대화: 1,000명 × 5회 = 5,000회
입력 토큰: 5,000 × 500 = 2.5M 토큰
출력 토큰: 5,000 × 500 = 2.5M 토큰
```

| 모델 | 일일 비용 | 월간 비용 |
|------|----------|----------|
| Claude Haiku 3 | $3.76 | **$113** |
| Claude Sonnet 4.5 | $45.00 | **$1,350** |
| Gemini Flash-Lite 2.5 | $0.94 | **$28** |
| Gemini Flash 3 | $8.75 | **$263** |

### 4.2 Medium 사용 패턴 (1,000명/일)

```
일일 총 대화: 1,000명 × 15회 = 15,000회
입력 토큰: 15,000 × 1,000 = 15M 토큰
출력 토큰: 15,000 × 1,500 = 22.5M 토큰
```

| 모델 | 일일 비용 | 월간 비용 |
|------|----------|----------|
| Claude Haiku 3 | $32.00 | **$960** |
| Claude Sonnet 4.5 | $383.00 | **$11,475** |
| Gemini Flash-Lite 2.5 | $8.00 | **$240** |
| Gemini Flash 3 | $75.00 | **$2,250** |

### 4.3 Heavy 사용 패턴 (1,000명/일)

```
일일 총 대화: 1,000명 × 30회 = 30,000회
입력 토큰: 30,000 × 2,000 = 60M 토큰
출력 토큰: 30,000 × 3,000 = 90M 토큰
```

| 모델 | 일일 비용 | 월간 비용 |
|------|----------|----------|
| Claude Haiku 3 | $128.00 | **$3,825** |
| Claude Sonnet 4.5 | $1,530.00 | **$45,900** |
| Gemini Flash-Lite 2.5 | $32.00 | **$945** |
| Gemini Flash 3 | $300.00 | **$9,000** |

---

## 5. 월간 비용 요약

### 5.1 모델별 월간 비용 (1,000명 기준)

| 사용 패턴 | Claude Haiku | Claude Sonnet | Gemini Flash-Lite | Gemini Flash 3 |
|----------|--------------|---------------|-------------------|----------------|
| **Light** | $113 | $1,350 | **$28** | $263 |
| **Medium** | $960 | $11,475 | **$240** | $2,250 |
| **Heavy** | $3,825 | $45,900 | **$945** | $9,000 |

### 5.2 비용 시각화

```
월간 비용 (Medium 사용, 1,000명)

Gemini Flash-Lite  ████ $240
Claude Haiku       ████████████████ $960
Gemini Flash 3     █████████████████████████████████████ $2,250
Claude Sonnet      ████████████████████████████████████████████████████████████████████████████████████████████████████ $11,475
                   |--------|--------|--------|--------|--------|
                   $0      $2,500   $5,000   $7,500   $10,000  $12,500
```

---

## 6. 구독 vs API Key 비교

### 6.1 구독 방식 한계

| 플랜 | 월 비용 | 한도 | 1,000명 서비스 |
|------|--------|------|---------------|
| Claude Pro | $20 | 45 메시지/5시간 | ❌ 불가능 |
| Claude Max 5x | $100 | 225 메시지/5시간 | ❌ 불가능 |
| Claude Max 20x | $200 | 900 메시지/5시간 | ❌ 불가능 |
| Gemini Advanced | $20 | 100 쿼리/일 | ❌ 불가능 |

### 6.2 방식별 비교

| 항목 | 구독 방식 | API Key 방식 |
|------|----------|-------------|
| **비용 구조** | 고정 월정액 | 사용량 기반 |
| **확장성** | 제한적 | 무제한 |
| **다중 레플리카** | ❌ Rate Limit 공유 | ✅ 가능 |
| **적합 규모** | 개인/소규모 (10명 이하) | 중규모 이상 |
| **ToS 준수** | ⚠️ 서비스 운영 시 회색영역 | ✅ 명확히 허용 |

### 6.3 규모별 권장 방식

| 사용 규모 | 권장 방식 | 예상 월 비용 |
|----------|----------|-------------|
| **개인 (1명)** | 구독 (Pro) | $20-40 |
| **소규모 (10명 이하)** | 구독 또는 API | $20-100 |
| **중규모 (100명)** | API (Flash/Haiku) | $30-300 |
| **대규모 (1,000명)** | API (하이브리드) | $500-3,000 |

---

## 7. 비용 최적화 전략

### 7.1 스마트 라우팅 (하이브리드 모델)

```
┌─────────────────────────────────────────────────────────┐
│                    Smart Router                          │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  요청 분류                       라우팅 대상             │
│  ─────────────────────────────────────────────────────  │
│  간단한 질문 (분류, 요약)  ──▶  Gemini Flash-Lite      │
│  일반 대화 (Q&A)          ──▶  Gemini Flash 3          │
│  복잡한 분석              ──▶  Claude Haiku            │
│  코드 생성/리뷰           ──▶  Claude Sonnet           │
│  고급 추론                ──▶  Claude Opus / Gemini Pro│
│                                                          │
└─────────────────────────────────────────────────────────┘
```

### 7.2 하이브리드 구성 예시

| 요청 비율 | 모델 | 단가 (1K 토큰) |
|----------|------|---------------|
| 70% | Gemini Flash-Lite 2.5 | $0.08 |
| 20% | Gemini Flash 3 | $0.50 |
| 10% | Claude Sonnet 4.5 | $3.00 |

**예상 월간 비용 (Medium, 1,000명)**:
- 단일 모델 (Claude Sonnet): $11,475
- 하이브리드: **~$800-1,200** (약 90% 절감)

### 7.3 캐싱 전략

```
┌─────────────────────────────────────────────────────────┐
│                   Caching Strategy                       │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  1. 시스템 프롬프트 캐싱                                 │
│     - 반복되는 시스템 프롬프트를 캐시                    │
│     - 절감: 입력 토큰 90% 할인                          │
│                                                          │
│  2. 컨텍스트 캐싱 (Gemini)                              │
│     - 대화 히스토리 캐싱                                │
│     - 절감: 캐시 읽기 90% 할인                          │
│                                                          │
│  3. 응답 캐싱 (자체 구현)                               │
│     - 동일 질문에 대한 응답 캐싱                        │
│     - 절감: API 호출 자체 감소                          │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

### 7.4 Batch API 활용

| 사용 케이스 | Batch 적용 | 절감율 |
|------------|-----------|--------|
| 실시간 대화 | ❌ | - |
| 일괄 요약 | ✅ | 50% |
| 번역 작업 | ✅ | 50% |
| 데이터 분석 | ✅ | 50% |

---

## 8. 최적화된 비용 예측

### 8.1 시나리오: Medium 사용, 1,000명, 하이브리드

```
구성:
├── 70% 요청: Gemini Flash-Lite ($240 × 0.7 = $168)
├── 20% 요청: Gemini Flash 3 ($2,250 × 0.2 = $450)
└── 10% 요청: Claude Sonnet ($11,475 × 0.1 = $1,148)

캐싱 적용 전: $1,766/월
캐싱 적용 후 (30% 절감 가정): ~$1,236/월
```

### 8.2 최종 비용 예측표

| 규모 | 사용 패턴 | 최적화 전 | 최적화 후 |
|------|----------|----------|----------|
| 100명 | Light | $113 | **$50-80** |
| 100명 | Medium | $960 | **$150-250** |
| 1,000명 | Light | $1,130 | **$300-500** |
| 1,000명 | Medium | $9,600 | **$800-1,500** |
| 1,000명 | Heavy | $38,250 | **$3,000-5,000** |

---

## 9. 인프라 비용 포함 총 비용

### 9.1 Azure 인프라 비용

| 서비스 | 사양 | 월간 비용 |
|--------|------|----------|
| Azure Container Apps | 1 vCPU, 2GB RAM | $50-70 |
| Azure Files | 1GB Standard | $1 |
| Azure Redis Cache | Basic C0 | $16 |
| Azure Container Registry | Basic | $5 |
| 네트워크 (Egress) | ~50GB/월 | $5 |
| **인프라 소계** | | **~$77-97** |

### 9.2 총 운영 비용 (1,000명, Medium)

| 항목 | 월간 비용 |
|------|----------|
| LLM API (최적화) | $800-1,500 |
| Azure 인프라 | $77-97 |
| **총계** | **$877-1,597** |

---

## 10. 결론 및 권장사항

### 10.1 PRD 정책 수정 권장

| 기존 정책 | 수정 권장 |
|----------|----------|
| API Key 사용 금지 | **규모별 차등 적용** |

### 10.2 규모별 권장 정책

| 규모 | 권장 방식 | 이유 |
|------|----------|------|
| **개인/테스트** | 구독 (CLI OAuth) | 비용 효율적 |
| **소규모 (10명 이하)** | 구독 또는 API | 상황에 따라 |
| **중규모 이상 (100명+)** | **API Key 필수** | 확장성, ToS 준수 |

### 10.3 비용 대비 효과

```
1,000명 Medium 사용 시:

구독 방식 시도 시: 불가능 (Rate Limit 초과)
API 단일 모델: $11,475/월
API 하이브리드 + 최적화: $800-1,500/월

→ 최적화로 약 85-93% 비용 절감 가능
```

---

## 11. 참고 자료

- [Claude API Pricing](https://platform.claude.com/docs/en/about-claude/pricing)
- [Gemini API Pricing](https://ai.google.dev/gemini-api/docs/pricing)
- [Claude API Pricing Calculator](https://costgoat.com/pricing/claude-api)
- [Gemini API Pricing Calculator](https://costgoat.com/pricing/gemini-api)
- [LLM API Pricing Comparison 2025](https://intuitionlabs.ai/articles/llm-api-pricing-comparison-2025)

---

## 12. 변경 이력

| 버전 | 날짜 | 작성자 | 변경 내용 |
|------|------|--------|----------|
| 0.1 | 2026-01-08 | - | 초안 작성 |
